## 기능 목적

신입 상담원이 실전 상담에 대한 연습을 진행할 수 있도록 도우며, 상담원의 상담 역량 강화를 목적으로 한다.

## 구현 모듈

`app/api/vi/endpoints/education.py`
- 교육 시뮬레이션 기능 전반

`app/llm/education/feature_analyzer.py`
- DB에 저장된 과거 상담 사례와 그곳에 연결된 고객 정보를 기반으로, 해당 상담에서 보였던 해당 고객의 성향 및 특성, 말투 등을 분석한다.

`app/llm/education/persona_generator.py`
- 분석된 고객의 성향 및 특성을 기반으로, 그 고객을 모방하는 페르소나를 생성한다.

## 사용자 유즈 케이스

사용자가 화면에서 '시나리오'를 임의로 선택하면 education.py가 실행되도록 한다.

현재 프론트엔드가 연결되지 않았으므로, '버튼이 눌렸음'을 상정하는 것으로 시작한다.

선택된 시나리오의 난이도(초급, 상급)와 문의 유형에 따라 다음 조건을 따른다.

- 난이도 '초급'
    - 시나리오가 눌린 시점에 해당 시나리오와 같은 문의 유형을 가진 과거 상담 사례 1개를 임의로 고른다.
    - 그 상담에서 있었던 고객의 페르소나를 실시간으로 생성
    - 상담은 단순하고 깊지 않은 문의이며, 간단한 흐름으로 진행

- 난이도 '상급'
    - 페르소나를 실시간이 아닌 사전에 생성된 상태로 DB에 저장.
        - 특정 상담 사례가 우수사례로 등록될 때, 등록 즉시 백엔드에서 feature_analyzer가 해당 상담의 내용과 고객 특성을 면밀히 분석하고 persona_generator가 페르소나를 생성하여 저장.

        - '초급'과 달리 분석/생성이 더욱 깊게 진행되므로 별도의 함수에서 처리한다.
        
    - '상급'의 경우 페르소나뿐 아니라 해당 상담의 전체적인 내용과 흐름을 분석하여 하나의 '각본'을 추가로 생성한다.
    
        - 이 각본은 상급 시뮬레이션의 평가 지표로 사용되며, 사용자의 상담이 이 각본을 얼마나 유사하게 따라했는지를 평가한다. (평가 함수는 미구현)

    - 교육 시뮬레이션 화면에서 시나리오를 선택하면, 그 시나리오와 같은 문의 유형을 가진 우수사례 1개를 임의로 고른다.

    - 해당 우수사례에 대해 생성된 페르소나와 각본을 불러와 상담을 진행한다.

    - 상담은 복잡하고 다채로우며, 다양한 상황을 겪을 수 있도록 진행한다.

## 기능 요구사항

**EDU-SIM-001 시나리오 선택**

1. 인입 케이스별 시나리오를 표시한다.
2. 각 시나리오에는 난이도(초급, 상급)와 문의 유형을 표시한다.
    - 난이도 '초급'은 단순 상담, 난이도 '상급'은 우수사례 모방
3. 시뮬레이션을 진행할 시나리오를 선택할 수 있다.
4. 이미 진행한 적 있는 시나리오는 별도의 색상과 함께 최근 진행 건의 통화시간 및 점수를 표시한다.

**EDU-SIM-002 가상 고객 페르소나 생성**

1. 과거 실제 상담 데이터를 기반으로 고객의 나이대, 성향, 문의 유형 정보를 포함해 페르소나를 생성한다.
2. 난이도 '상급'의 경우 과거 상담 데이터의 전체 흐름을 반영하여 시뮬레이션 시 시나리오로 활용한다.

**EDU-SIM-003 시뮬레이션 진행**

(아직 구현되지 않았으므로 함수명만 정의)

**EDU-SIM-004 시뮬레이션 후처리 및 피드백**

(아직 구현되지 않았으므로 함수명만 정의)