# 1. 분석 대상 원본(참고용)
SOURCE_TRANSCRIPT = """
상담사
안녕하세요, 테디카드 고객센터입니다. 무엇을 도와드릴까요?

고객
아니, 내가 선결제를 했는데 왜 이번 달 청구 금액이 그대로 나와요?
이게 말이 됩니까?

상담사
불편을 드려 죄송합니다, 고객님. 확인을 위해 먼저

고객
아니 죄송하다는 말 말고요.
선결제했으면 빠져야 되는 거 아니에요?
내가 돈을 왜 미리 냈는데요?

상담사
고객님 말씀 충분히 이해합니다.
다만 선결제 금액은 청구서 반영 시점이—

고객
아 그러니까요,
카드사는 항상 시점 타령이야.
결론적으로 난 지금 돈 두 번 낸 거잖아?

상담사
고객님, 두 번 납부된 것은 아니고요.
선결제하신 금액은 이미 카드 이용금액에서 차감 처리되어 있습니다.

고객
근데 왜 청구 금액은 그대로냐고요!
눈에 보이는 게 다인데!

상담사
네, 그렇게 보이실 수 있습니다.
청구서는 결제일 기준 이전 사용 금액으로 먼저 생성되고,
선결제 금액은 결제일에 자동으로 상계 처리됩니다.

고객
아니, 일반 사람은 그걸 어떻게 알아요?
이렇게 헷갈리게 만들어놓고 누가 이해합니까?

상담사
맞습니다, 고객님.
충분히 헷갈리실 수 있는 부분이고, 그 점은 저희도 개선 중에 있습니다.

고객
개선은 무슨…
그럼 내가 지금 이 카드 그냥 해지하면 되는 거죠?

상담사
해지 전까지 불편을 느끼셨다면 정말 죄송합니다.
다만 해지와는 무관하게,
고객님께서 선결제하신 금액은 이미 정상 반영되어
추가로 부담하시는 금액은 없습니다.

고객
진짜 확실한 거죠?
나중에 또 말 바꾸는 거 아니죠?

상담사
네, 고객님.
현재 기준으로 이번 결제일에 실제 출금되는 금액은 선결제분만큼 차감된 금액이며,
필요하시면 문자나 앱에서 확인 가능한 경로도 안내드리겠습니다.

고객
하… 알겠습니다.
근데 이런 거는 좀 똑바로 써놔요.

상담사
소중한 의견 감사드립니다, 고객님.
불편을 드린 점 다시 한번 사과드리며,
다른 문의 사항 있으시면 언제든지 도와드리겠습니다.
"""

# 2. 추출된 페르소나 프로필 (Step 1 결과물 가정)
# 실제로는 LLM이 추출해야 하지만, 비교 평가의 공정성을 위해 고정된 값을 사용
PERSONA_PROFILE = {
    "role": "카드사 시스템에 불만을 가진 급한 성격의 고객",
    "tone": "공격적, 냉소적, 반말과 존댓말 혼용, 말 끊기",
    "context": "선결제를 했는데 청구서에 반영이 안되어 이중 출금을 우려하며 불안하고 화가 난 상태.",
    "restrictions": "상담사의 사과를 거부할 것. 어려운 용어(상계 처리 등)를 쓰면 더 화를 낼 것. 시각적인 증거(앱 화면)만 믿을 것."
}

# 3. 시스템 프롬프트 구성 (RTCR 적용)
def get_system_prompt(profile):
    return f"""### Role
당신은 {profile['role']}입니다.
다음 설정을 완벽하게 연기하십시오.

### Context
{profile['context']}

### Tone & Style
- {profile['tone']}
- AI가 아닌 사람처럼 행동하십시오.

### Restriction
- {profile['restrictions']}
"""

# 4. 테스트 시나리오 (사용자 질문 리스트)
TEST_SCENARIOS = [
    "고객님, 잠시만 진정해주시겠습니까? 제가 확인해드리겠습니다.",  # 시나리오 1: 진정 유도 -> 반응: 화냄
    "현재 전산상으로는 정상적으로 차감 처리가 되어 있습니다.",       # 시나리오 2: 전산 설명 -> 반응: 눈에 보이는 것 강조
    "그럼 이번 달에는 청구되지 않도록 제가 조치해드리겠습니다."      # 시나리오 3: 해결책 제시 -> 반응: 의심 및 확인
]